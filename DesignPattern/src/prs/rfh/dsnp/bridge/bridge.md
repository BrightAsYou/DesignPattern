# Bridge

> 桥接模式

### 应用场景
将抽象化(Abstraction)与实现化(Implementation)脱耦，使得二者可以独立地变化
适用于多个维度的变化，少用继承多用组合的原则。值得指出的是，若使用继承的方式，
当第一维度为N，第二维度为M时，那最终的实现个数为M*N，当某一维度增加实现时，另
一维度将重新进行多个实现。例如，一个汽车抽象类，轿车和公共汽车作为其实现。一个
路抽象类，将高速公路和乡村公路作为其实现，那么如果作为汽车的行为，在路上跑需要
有2*2种具体情况，当添加一种汽车时，其实现类也会急剧膨胀，这样是不可接受的。当我们把
具体的实现作为组合对象进行引用时，这种情况就能避免。


### 理解
对于多个维度进行抽象时，这种方式还是很容易想到的，关键在于对于不同维度的把控，怎样将
具体的业务场景进行抽象分离。虽然很多情况下，具体的业务场景的不同维度不是按组合的方式
进行扩展实现的（不会达到N*M的情况），但是抽象本身就是对业务理解加深的过程，也是后期
扩展的捷径。

### 自己的应用
银企改造过程中，对于不同的银行渠道（横向的切分，如ICBC和ABC）和各个渠道的不同业务（
如外发交易和外发结果查询交易）以及渠道对应的协议（TCP和HTTP）。这里我们就拥有了三个维度
2*2*2=8 中情况，但如上所说，不是每个银行都会提供两种协议，事实上，只提供一种，但是，对于
不同银行，的确存在协议不同的情况，这是抽出协议层的一个依据（当然，协议层的复用也是另一个
重要依据），此外，对于各个渠道的各种交易，我们都可以抽象出公共行为，进行模板方式的抽象。
我的做法是将这些交互分为三个阶段(前处理：一般是更新订单状态、拼接参数等，外发，后处理：一般是解析报文、更新状态)
这样，我们在具体的交易行为下，只需要组合相应的协议和实现响应的交易即可。
