# Command Pattern（命令模式）

### 应用场景

- 1 Multi-level undo（多级undo操作）
- 2 Transactional behavior（原子事务行为）
- 3 Progress bars（状态条）
假如系统需要按顺序执行一系列的命令操作，如果每个command对象都提供一个getEstimatedDuration()方法，那么系统可以简单地评估执行状态并显示出合适的状态条。
- 4 Wizards（导航）  
   通常一个使用多个wizard页面来共同完成一个简单动作。一个自然的方法是使用一个command对象来封  
   装wizard过程，该command对象在第一个wizard页面显示时被创建，每个wizard页面接收用户输入并设  
   置到该command对象中，当最后一个wizard页面用户按下"Finish"按钮时，可以简单地触发一个事件  
   调用execute()方法执行整个动作。通过这种方法，command类不包含任何跟用户界面有关的代码，可以  
   分离用户界面与具体的处理逻辑。
- 5 GUI buttons and menu items（GUI按钮与菜单条等等）
- 6 Thread pools（线程池）  
   通常一个典型的线程池实现类可能有一个名为addTask()的public方法，用来添加一项工作任务到任务  
   队列中。该任务队列中的所有任务可以用command对象来封装，通常这些command对象会实现一个通用的  
   接口比如java.lang.Runnable。
- 7 Macro recording（宏纪录）  
    可以用command对象来封装用户的一个操作，这样系统可以简单通过队列保存一系列的command对象的状  
    态就可以记录用户的连续操作。这样通过执行队列中的command对象，就可以完成"Play back"操作了。


### 个人见解

其实命令模式是一个封装行为成统一规范的过程，例如，A吃饭，和B唱歌是两个完全不同的行为模式。但是，如果我们将其打包成一个可以被公共使用并灵活调遣的组件的话，我就可以将A，B的不同行为封装成统一的command规范，也就是此时，command成了各个行为的代理，这样，我们可以利用command统一的对外接口规范化的暴露毫不相关的行为，不仅如此，我们还可以进行灵活的组合而无需耦合具体的行为对象。

### 举例

以记账中的会计分录为例，借贷的记账分录可以看做的独立而不相关的行为，但是我们使用中通常都是多个分录结合使用，这种组合十分灵活，几借几贷变化很大，且借贷的分录是不确定的，因此，对于每个业务类型，我们都会对应一个组合。这样就给命令模式很大的发挥空间。

